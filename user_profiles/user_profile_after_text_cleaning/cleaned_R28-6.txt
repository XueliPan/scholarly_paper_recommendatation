mine user web search activity layer network capture click context benjamin university benjamin yahoo ca yahoo ca abstract mine user web search activity potentially broad range include web result automatic search query reformulation click detection estimation document relevance prediction user satisfaction analysis difficult data record search interact although abundant noisy work explore utility mine search behavior represent observe include time user spend page whether user reformulate query case study examine contribution data make predict relevance document absence document content model end first propose method group particular user accord different task undertake task correspond distinct information need propose network holistically model aim identify distinct pattern search finally join pattern list custom feature use gradient boost decision tree predict relevance set query document pair relevance experimental result confirm potential model precision predict relevance document base model user search click behavior model use click query feature network input subject information storage retrieval information search retrieval general term theory experimentation work conduct author yahoo research permission make digital hard copy part work personal classroom use grant without fee provide copy make distribute profit commercial advantage copy bear notice full citation first page copy otherwise republish post redistribute list require prior specific permission fee copyright web retrieval query log analysis user model relevance prediction data one introduction large source implicit information user web search interest search engine log record user action particular search keep record interaction log record chiefly temporary user id login query issue user result return engine result user click user activity model exploit data propose variety focus specific goal estimate attractiveness perceive relevance search result snippet give information need seven predict next action user perform one order allow example page result model predict user want search result author tackle problem cluster user activity present synthesis observe user behavior twenty work differ build generic model user activity use unsupervised network apply solve specific task schematically interact search engine specific task mind issue one query satisfy result give may go research new task leave search engine interest sequence query relate single query intent information need follow fifteen name sequence query chain best knowledge work propose generative holistic model search click produce chain query query chain important source information since span whole search process undertake user high level goal wish predict user satisfaction hence accurate measurement true performance search engine would do level granularity outcome whole process reflect satisfaction user accurately individual click make single page search result return single query model present paper attempt build holistic cluster model query chain level first step towards goal order validate model must choose task show useful information learn model choose one core web search prediction document relevance since modern web search learn rank use relevance predict relevance thus great importance since amount information collect user search order collect ask judge approach fifteen seven use click log data estimate attractiveness search result intrinsic document relevance three case user click non relevant document mean find click document much harder task find relevant even aggregate find document click least user judge relevant editorial high percentage relevant document due fact click random time click relevant link abstract title document result list use complex user model take account full sequence user action need distinguish attractive document another advantage use complex user model task predict document relevance relevance document click single time single query estimate greater accuracy model since employ complete description user much time spend read search result document whether click another document afterwards difficult compare result previous work however since none try predict document relevance one interaction user without use information like document rate predict user ideally one important since distribution number time query appear skew long tail query occur many time large number occur two month log describe next section observe distinct query thirty total query volume issue single time one click one session hard know whether document relevant let alone search successful user unless click understand context query chain belong even case one query estimate well user satisfy still issue evaluation purpose build user profile hence important able use data include one section two present simple methodology group query query chain base search log absence data query chain sequence query relate single query intent information need example find information camp sit different high level like plan holiday define experimentally determine series use group together sequence user action two analyze generate data main proposal layer network framework latent design explain subset user action section three layer correspond give granularity search process query chain level single query session level search result inspection process document analysis process model try predict time click next action number query number web search result page view extract log process describe point model cluster user chain since use assign series action single label probable one three validate approach step one two click relevant irrelevant document give query use standard machine learn technique gradient boost tree eight learn feature extract compare model section four note aim experiment validate model obtain best relevance prediction sophisticate model integrate information various source would necessary achieve task another point validation confirm whole process build query chain learn model make sense believe model easily extend use variety web search include predict user satisfaction help detect click compare situate work respect relate end article section five key reference paper one six two construct chain section present methodology construct query chain information associate user search engine examine page search result click document previous work literature rely set manually label data least train model simple thirty contrast approach fully automatic sense base estimate data make use sample log commercial search engine period days data treat accordance search engine privacy policy attempt make match anonymous real query normalize semantically remove extra space add extra quote miss ensure preserve result order search engine search log list simple make temporary user id time query action either view page result click document section make use figure one point line one represent one event temporary anonymous user id represent time proceed describe three step take construct query chain atomic sessions query chain first construct atomic sessions associate user id query string ie exactly sequence character within reasonable time frame give amount time assume user start new atomic session even though query remain line two figure one show group match query string construction atomic user session depend one parameter time frame span use thirty threshold quite standard even though range five propose nineteen days log remove sessions contain one click empty sessions sessions without click order get homogeneous result million atomic sessions build chain atomic sessions whole process illustrate figure one give description method construct query chain detail start concatenate atomic sessions user generate single initial query chain per compute simplicity drop overlap sessions although sophisticate model could take account various chain cope overlap interleave last atomic session world cup get disconnect chain base time delta previous session similarity threshold use time threshold get first set candidate chain observe inside chain query correspond different order identify segment chain automatically estimate similarity different query string adjacent atomic sessions compute three similarity measure one symmetric two asymmetric symmetric measure query potential reformulation transform two character query string cosine two use proximity measure two asymmetric measure degree inclusion potential reformulation original query counterpart degree inclusion original query reformulation degree inclusion compute probability character appear one query appear simplicity reliability perform query process work character example compose c include space strategy perfect chain incorrectly break computer shop order incorrectly keep new york new york however would need semantic query process choose ignore issue plot value cumulative proportion adjacent pair query join chain observe precise cut point almost linear relationship percentage query pair maximum similarity value former range forty pair latter range zero one hence choose fifty atomic session pair include similarity practice use follow cosine inclusion new old query inclusion old query new cut chain similarity value indicate generate chain overall method produce twelve query standard deviation six per chain quite different query per chain report eleven may artifact session chunk process however sample use eleven small query log work probably contain proportion navigational bookmark query three estimate around fifty query navigational transactional query typically involve single search follow click typically one al nineteen find around query repeat long period time could consider navigational result single repeat click order simultaneously limit complexity model filter filter chain contain arbitrary threshold fifty action within chain threshold sufficiently high capture simple complex user leave us chain section three four look useful chain predict document relevance three network model figure one four step use build query chain line one set exact associate query string show line two show atomic sessions compose set match query string within thirty minute threshold subsequent line show sequence cut make obtain query chain time similarity time delta ie time difference two consecutive action click atomic session analyze distribution decide global time threshold give us set smaller chain user compute similarity measure two adjacent atomic session query string inside chain data decide global query similarity threshold break chain smaller process detect interleave sessions end smaller disjoint chain time threshold set time threshold compute intersession time distribution extract atomic sessions time last action session first action next session verify make intuitive hypothesis time two atomic sessions significantly shorter relate information need suggest observe intersession time result combine two upon visual examination empirical time difference distribution seem compose distribution follow seem natural associate two time relate sessions unrelated sessions respectively fit mixture two control function p z new chain b one decide distribution originate observation time difference two sessions b two set p b p z six new chain b p z new chain b distribution power law distribution use em procedure fit obtain follow estimate alpha use threshold cover distribution p threshold lead time delta seven ten second result consistent find eleven twenty query interval action interval analysis search correspond new query line three figure one show also try distribution fit data well user search engine seem fit particularly well test operate test exit cognitive model twelve world cup cup cup cup two three four one world cup basic idea limit short time memory tend group action hierarchy solve problem use iterative strategy move goal one sub purpose achieve context goal user satisfy information need goal hierarchy easy create since process heavily constrain actual search technology user issue new search string look another page result click document inspect content stage user either return higher level goal perform another task within goal perform lower level goal instance inspect result page user might issue modify query higher level goal look another page level click document inspect lower level goal model assume goal complete user start new one imply model account possible example user open several browser stage wiser filter strategy chain level would better perform believe amount data sufficient ignore least case practical predict relevance show next section ideally would like cluster different type behavior assign label undertake user example page user consult document find anything interest page level goal give label would easy document relevant gain insight user satisfaction practice realistic build hand lot variability search pattern twenty difficult identify pattern data high dimensionality use readily available straightforward generally require distance two sessions define difficult case search sessions variable length structure layer network model propose fit naturally hierarchical nature user action offer mean sequence various correspond different goal level main objective associate label state random variable formalism set user action various goal level chain atomic session page result examination goal label good summary associate action like time spend page overall relevance better user satisfaction label turn use predict explain next section predict future action like whether user rephrase query moreover combine various level goal hierarchy model provide natural way capture context around user click different goal level label examination goal label chain goal probabilistic framework conditional independence random exploit order simplify model decision determine acyclic graph variable every node reach follow give parent network specify compute conditional variable give state parent graph structure enough define probability distribution random cluster might problem filter surely impact relevance prediction next section task perform framework structure determine search session learn contrarily numerical label different session number click discover automatically train time click level could discover click non relevant document associate shorter time delta example learn turn use analyze new session thereby enable use model predict label give naturally label harder interpret example suggest nevertheless useful interpretable certain extent underline section network structure observe latent go model detail let us first give two first scenario user issue query look first page result second page click first document second page result three second later second document page result five second later request third page result rewrite query look first page result second query abandon search intuitively user satisfy document click probably relevant note consider click relevance feedback would lead incorrect conclusion second scenario user issue search click one document never return second session could infer document relevant user satisfy information need refer figure two graphical representation two sessions example also illustration network structure describe later moment important part figure structure term different state also refer goal type label associate different box number obvious even simple example certainty real relevance estimate relevant click level first try categorize click depend various factor like whether do shortly user saw search result whether new click much time user spend analyze link document example click state represent local information difficult draw alone could consider two class one click occur shortly page view type one occur give amount time case inspection another document type two state associate higher level effectively define click sequence informative statistics use describe click figure two three type page page without click page type one page succession state one two click page type two page one click type one page type three climb one level time hierarchy associate three state search correspond different sequence page associate two state chain effectively define two different type atomic search sequence hierarchy state provide context individual click permit distinguish bad click search figure two good one search b expect evaluation network probable hierarchy state associate search b different network expect state fully determine rather distribution state different latent goal depend upon network structure say otherwise different state latent goal random define many soft cluster action undertake user within goal next list summarize different type latent random ie goal label observe random associate click goal leave hierarchy state also summarize sequence nest directly follow list chain root variable represent query chain type associate observation number search issue chain search level atomic query session observation retain level number page search result request user search page represent behavior user search result page observation number click user perform page click associate examination document search result list associate time spend examine document click delta whether user already click document atomic session relevance assessment document available could associate goal example could attach search goal time spend user look search result page click document however choose discard ancillary ease model learn moreover time spend search goal already model part click goal fact learn explain next section explore best associate different future work latent observe random define describe structure network first link correspond latent assume fully determine goal refer ie number click page goal number search chain goal example figure two number different atomic search dependent chain state second link state distribution sequence state associate goal state model impose dependence goal vertical two latent dependence one onto next correspond horizontal depict could use higher order dependence different hierarchical level want analyze millions search sessions choose common dependence use many graphical model keep inference tractable note particular structure choose limit complexity state latent variable associate goal g know state independent reflect hypotheses instance figure two know state second page variable state page search variable chain variable influence state two associate click make page conditional learn previous section give qualitative overview model show structure respect possible query chain section present quantitatively discuss compute actual learn define three set learn use em algorithm five first set encode chain prior prior probability distribution chain state distinct two chain thus encode membership chain different latent type c second encode transition probability give goal higher level goal state previous level goal latter exist within higher level goal one parameter use possible configuration instance probability search p search c previous search give latent state c parameter correspond transition search type search type within chain type c note distinct set action first sequence ie first search chain first page search first click page finally third set encode generation example number click give page state model discrete finite number state click relevant relevant use probability table example parameter correspond probability user document link give click state model number click time second theoretically bound use distribution parameter depend correspond latent state example parameter delta time next action distribution give click state choose distribution simple seem match empirical distribution click time think rare two last set share among construct ensure state give goal always represent underlie sequence number state different latent easy set computation issue analyze millions sessions complexity grow quickly number possible ten state page variable five click variable complexity ten five five click relate inference hence learn experimental learn experiment three model different number latent state two first model five ten latent state level third one five latent state latent except click twenty state choose last configuration number observation type click level level also plan validate model relevance prediction believe model click state would better suit indeed confirm experiment denote different note arbitrary make order enough information predict relevance limit model complexity discuss section two identify chain day usage log sample divide data randomly two chain also use set independently create manual relevance randomly divide two roughly equal experiment since log contain query relevant proprietary create draw sample real user query log figure two network example associate one query chain user issue two different query respect first one user explore three result page make two click view second one first second click user wait three five second interact another time search system box number represent one possible label different state case deterministic version model double circle observation single circle one latent state goal label model eventually white label black use distinguish different set compute conditional network leave assess query respectively note particular since consider pair receive click majority judge relevant human instance pair unique pair train three four different set define four possible r set relevance click document always available even query relevance case set relevance variable correspond document train set contain one set chain one set relevance use fix number learn model seem enough convergence em algorithm different model log likelihood stable give high number check issue expect model higher number achieve higher average likelihood also observe reach comparable data likelihood although latter less complex turn slightly better average analysis learn interest get insight actually learn correspond hypotheses formulate present directly learn model would mean much since learn process unsupervised label represent category hence rather attempt give interpretation three model learn compute expect value model number search page click expect total time span give chain search state chain directly model also compute example expect query length word associate particular state c chain variable compute take sum atomic sessions value p chain state c help interpret kind behavior different chain state summarize chain latent state distribute evenly account approximately number twenty five latent state ten ten state although could simply mean information level believe might signal chain state might yet specialize enough explain observe behavior add state might beneficial future work might learn high number latent state use entropy posteriors latent variable state limit complexity model two whatever chain state three search state enough account atomic sessions search level four state cover configuration use remain state account one less atomic sessions suggest number search latent state enough cluster atomic sessions interestingly distinguish one particular type search behavior quite different characterize fairly large number click seven eleven compare one state large number page view four seven page compare around one state time span second typical value state vary forty ninety second average one query sessions belong latent state conjecture part search behavior may correspond either click kind browse document return inspect another find expect query length word nearly constant respect chain state around vary search state learn interest since query length observation include learn reason observe different different search state might infer relationship query search length correspond user search behavior indeed confirm fact long search time large number browse result page associate query around word slightly average word last observation regard time span time span also vary lot chain state second second page page five three click zero click zero click click click search one page one b eleven quite surprise give value remain approximately stable average query length number search page click suggest chain capture different type user maybe involve less read document result indeed number chain state big enough capture information provide data four predict relevance cluster method evaluate quality chain construction cluster indirectly result find show method indeed capture extra information could use many classification task relate web search log analysis section show information learn model use predict document relevance basic idea document belong context define general specific chain search page click latent also use link learn click state membership associate document relevance typically explore question like say something relevance document belong click state one click state two sixty search state one forty search state five attempt learn map take input membership precisely probability goal state give observation different latent state associate context click document output relevance assessment document end use machine learn technique gradient boost tree describe eight produce series weak shallow decision tree whose merge linear combination choose model since necessitate feature normalization perform well general also try use straightforward achieve performance good boost tree drawback capture well continuous relationship predict variable factor explore model since result sufficiently good validate model use implementation sixteen feature first define model take input set feature unrelated link feed idea provide least set feature use infer distribution different latent difference performance attribute useful feature provide confident usefulness describe feature use click document within search session word feature word use one month log feature give query average value feature term query use follow term feature q number time term belong clickless atomic session follow atomic session least one click indication ambiguity term since user reformulate query q proportion time user click last atomic session query contain term indication effective term provide good search result q misspell maximum possible term proportion time term substitute follow query good indicator misspell error q keep percentage time term keep next atomic session chain indicate whether useful query feature also use standard feature believe link relevance document use time next click available percentage whole session time user spend document total search time position document rank number click ratio click number total number click second click four click session five ratio feature estimate document observe set value chain document belong relevance exclude adjust chain belong particular chain state order maximize likelihood observation use em algorithm fix chain prior use information latent associate context document whose relevance want predict instance figure two predict second click would use information relevance variable appear direct path click variable chain variable compute follow feature distribution probability relevance click page search chain example click level feature p click state possible state variable set latent variable state maximize likelihood whole chain session note use state click goal hierarchy c c chain also use likelihood observation likelihood configuration p chain p chain c two feature serve measure confidence previous feature useful machine learn model base decision tree interest use information click goal goal hierarchy fix set feature characterize context click within query chain vector feature directly use fee standard machine learn algorithm result result report follow maximum tree depth decision tree set four model eight difference depth expect counterbalance fact provide integrate information deduce model feature albeit tree depth experiment sufficient stabilize result model four different train set compose average practical reason first subsample number use train keep negative use train set learn remain control generalization error model train cost function correspond logistic regression also try cost function learn rank document accord relevance top interpolate curve average four possible different model since single couple occur data aggregation predict relevance one observation need obtain single prediction pair experiment basic one score pair give mean score correspond simple aggregation model consider come independent equally important sophisticate case would adapt figure rank distinct query pair use mean score compute different model plot interpolate curve average four quite intuitively case best perform model follow finally model model stable difference term stability performance enough conclude real gain use information another conclusion number latent state important issue look importance different feature also informative use relative influence extend eight boost estimate approximate improvement square error result split node use feature figure four report value different model note relative influence feature one give model normalize sum one model feature associate network absent hence zero influence among different non feature time next click search time important regard latter believe relation task difficulty hence relevance document one feature use non base model misspell feature suggest wrongly spell query connect worse result among different model see influence chain class distribution higher ten state chain variable five chain variable figure four click variable heavily call contribution model latent state associate overall latent state seem beneficial relevance prediction task eventually note feature contribute use turn important strike example search time feature barely use base model model use heavily similarly time next action feature much use base model mean somehow successfully subsume latent state latent state contain reliable information feature validate approach base layer give difference tree learn five relate work section review relate work respect three different work query chain user activity model document relevance prediction also discuss exist approach query chain fifteen build support vector machine pair query issue within thirty one figure three non relevant document average four instance model proportion non relevant document among document two top graph bottom one top graph plot classifier performance feature associate single click use aggregate graph report score document query average classifier score perform better use maximum tree learn step one agreement sixteen number tree sufficient since error train set stable generalization error begin rise tree limit train model compose one log say one relevance set say test complement would example give us four possible per model distinct sessions judge query complete procedure one learn use two document interest generate feature maximize likelihood associate chain respect chain class without use relevance assessment three learn model map feature pair associate relevance four repeat step two time use five use model predict test performance rank half million four test set pair correspond one click assess document plot graph non relevant document since document much rare relevance set three average plot graph relevant document would informative since would produce near perfect curve result report figure three three model estimate attractiveness perceive relevance document independently layout influence white twenty mine user search activity within search process within surround navigation process distinguish two class issue query browse start one result actively use search engine satisfy user information need white focus qualitative user analysis user cluster also find time take follow search trail independent number query chain similar observation different chain state associate average number query different query chain eleven study dynamics user query refinement try find relationship two adjacent search action new query reformulation additional result interval information goal query category among fifteen recently al six propose model web search activity use list feature various level include user model order compute probability next action perform user give feature last user action example application work result important feature predict next user action time since start atomic session paper model predictive facilitate cluster different part search trail model hand model would probably bad predict next user action since number latent state small offer good summary subset user action eventually model try effect presentation rank document perceive relevance attractiveness document example model seven explain click cause document attractiveness position effect ie probability user consider look document snippet return search engine assume unattractive document often relevant seem intuitive presentation model could fuse model order predict relevance accurately predict relevance previous work predict relevance attractiveness ie whether user attract document snippet produce search engine click provide examine two four al one use logistic regression predict relevance document query rate document different position al use set feature extract aggregate user behavior pair predict relevance neural network model rely minimum number sessions query get accurate comparison model build use accurately predict relevance document base outcome one query chain article choose compare since two possible experimental would give unfair advantage one first case predict one observation would click rate zero position thus bad estimate relevance document model use observation one would face problem aggregation model use rather simplistic aggregation method figure four average importance different different model plot feature select learn algorithm accord whether belong chain find simple heuristic thirty minute threshold reach ninety classification accuracy sophisticate learn approach achieve accuracy give difference algorithmic complexity opt simple heuristic however general applicability analysis limit since use log university library web page less interaction general purpose web search engine al nine devise algorithm group query chain check delete add term query well take account time interval categorize query rewrite class generalization specialization reformulation machine learn use create classifier fourteen report al result produce small log reproducible data conduct experiment use much bigger use linear regression find query position sequence query user day predictive topic change al seventeen propose use content retrieve document detect query chain consider feature possible indication complexity reason compute language model distinct query practical deal large search usage log adaptation idea use similarity matrix word could useful also plan future work use machine learn approach build query chain mean time use simple drive data since know generalizable mention opt approach sophisticate since visual inspection chain seem confirm hypothesis thirty minute time threshold user activity model user activity model broadly divide three one analysis model aim gain insight typical user behavior two model try predict next user action time next misspell q last q keep q last empty predict relevance query chain include work eighteen extend language model include feedback provide previous search engine model query language model define mixture language model one use query term use sessions similar past query precisely language model document click within sessions purpose model include past information answer new user query contrarily approach focus build representation search process relevance document within session compare previous approach method one retrieve document query string judge relevant depend context suit well observation various work relevance relevance user relevance subject topic distinguish thirteen feature could use user personalization finally small scale user study perform kelly al ten study relationship time spend page relevance document find strong consistent relationship however ten author suggest time spend take account context user action find show indeed case six paper propose fully automatic way agglomerate atomic user sessions chain query associate single task information need approach consist find two one time relate base query string similarity believe find stable enough use work general search since stable across correspond basic human attention read time query modification however point sophisticate approach capable detect information need could improve result observe different user match hierarchical structure information need task include one search include one page search result propose layer network model discrete latent act summary subset action like everything relate browse search result page validate approach use feature extract predict relevance document show set feature improve prediction performance compare model use model could improve automatically determine number state latent investigate choose various level goal hierarchy similar six could use detail log provide sign product like search provide information search undertake user particular user click document resume search engine could also apply model predict user satisfaction search result could do use model satisfaction appear directly variable dependent chain type learn optimize value variable human seven reference one e e brill r learn user interaction model predict web search result proceed page new york press two brand structure learn conditional probability model via prior parameter extinction neural computation eleven five three taxonomy web search forum two four b r evaluate search model relationship relevance click nip five p dempster n laird b maximum likelihood incomplete data via de em algorithm journal royal statistical society six e model search browse study application proceed page seven g b user behavior search engine query log generative model predict rate proceed eight j h greedy function approximation gradient boost machine annals statistics five nine j harper combine evidence automatic web session identification information process management five ten kelly n j display time implicit feedback understand task effect page new york eleven e pattern search analyze model web query refinement press editor proceed twelve g miller e k plan structure behavior holt new york thirteen many information retrieval interact ten three fourteen automatic new topic identification use multiple linear regression information process management four fifteen f query chain learn rank implicit feedback proceed page new york press sixteen g ridgeway generalize boost model guide package seventeen x b tan c implicit user model personalize search proceed page new york eighteen b tan x c mine search history improve search accuracy proceed nineteen j e r information repeat query yahoo log proceed twenty r w white investigate behavioral variability web search proceed page new york