Author manuscript, published in "Computer Graphics Forum (Proceedings of the Eurographics Symposium on Rendering 2008) 27, 4
(2008)"

8
0
0
2

 
c
e
D
8

 

 
-
 

i

 

1
n
o
s
r
e
v
 
,

5
9
2
5
4
3
0
0
-
a
i
r
n

i

EurographicsSymposiumonRendering2008SteveMarschnerandMichaelWimmer(GuestEditors)Volume27(2008),Number4StylizedVectorArtfrom3DModelswithRegionSupportElmarEisemann1,2,HolgerWinnemöller1,JohnC.Hart1,3,andDavidSalesin1,41AdobeSystems,Inc.2ARTIS-INRIA/GrenobleUniversity3UniversityofIllinoisUrbana-Champaign4UniversityofWashingtonAbstractWedescribearenderingsystemthatconvertsa3Dmeshedmodelintothestylized2Dﬁlled-regionvector-artcommonlyfoundinclip-artlibraries.Toproperlydeﬁneﬁlledregions,weanalyzeandcombineaccuratebutjaggedface-normalcontourswithsmoothbutinaccurateinterpolatedvertexnormalcontours,andconstructanewsmoothshadowcontourthatproperlysurroundstheactualjaggedshadowcontour.Wedecomposeregiondeﬁnitionintogeometricandtopologicalcomponents,usingmachineprecisionforgeometryprocessingandraster-precisiontoacceleratetopologicalqueries.Weextendprogrammablestylizationtosimplify,smoothandstylizeﬁlledregions.Theresultrenders10K-facemeshesintocustomclip-artinseconds.1.IntroductionComparedtothememory-consumptiveﬁxedresolutionofrastergraphics,vectorgraphicsofferacompact,scalable,model-basedalternative,wellsuitedforoutputonhetero-geneousresolutiondevices,suchasprinters,projectors,screensandmobiledevices[HMK02,ICS05,QTG∗06].Thestrokesandﬁllsofvectorgraph-icsmorecloselymatchthetraditionaltoolsofartanddesign,andvectorgraphicshavebecomethepreferredmediumforthestylizedillustrationsthathelpvisuallycom-municateideasandconceptsintheformof“clip-art”li-braries.Buteventhoughtheirdigitalrepresentation(e.g.lay-eredﬁlled2Dpolygons)issimple,constructingavectoril-lustrationrequirestechnicalskillsbeyondthoseofthetypi-calconsumer,creatingademandforarenderingsystemthatconvertsa3Dmeshedpolygonalsurfacemodelintoacus-tomizedandstylizedillustrationwithlittletonouser-input,asdemonstratedinFig.1.Twocommercialapplications,LiveArt(v.1.2)andSwift3D(v.4.5),providetoolsforrenderingmeshedobjectsasﬁlled-regionvectorartbyvectorizingimageregions(in-cludingcastshadows)fromanintermediaterasterizedim-age.Thisapproachiscommontocartoon-shadedNPRmeth-ods[LMHB00,SMC04,MF06,BTM06,TiABI07],buttheﬁxed-resolutionsamplingoftheregiongeometrycanleadtoaliasingartifacts,asshowninFig.2.Filled-regionvectorartcanbecreatedfromimagesReceivePointHandshakePoseLightingNaturalDarkFigure1:Ourvector-artrendererconverts3Dmeshedob-jectsintocustom2Dﬁlled-regionillustrations.3Dobjectsbecomere-usableillustrationassetsthatcanbestyled,posedandlitforconsistencyandtobettercommunicateadesiredconceptormood.[KHCC05]andimplicitsurfaces[SEH08]buttheirappli-cationonmeshedobjectswouldrequireasimilarlyprob-lematicintermediaterepresentation.Contour-basedNPR,e.g.pen-and-inkrendering[WS94,WS96],directlyconvertsmeshedobjectsintolinedrawings,butavoidsdeﬁningandstylizingregionﬁllsinfavorofstroke-basedhatchingorstip-plingthatrelyonsimpler,parameterizedandtriangulatedre-gions.Sec.2furthercomparespriorapproaches.Thispaperdescribesanewmethod,diagramedinFig.3,c(cid:13)2008TheAuthor(s)Journalcompilationc(cid:13)2008TheEurographicsAssociationandBlackwellPublishingLtd.PublishedbyBlackwellPublishing,9600GarsingtonRoad,OxfordOX42DQ,UKand350MainStreet,Malden,MA02148,USA.8
0
0
2

 
c
e
D
8

 

 
-
 

i

 

1
n
o
s
r
e
v
 
,

5
9
2
5
4
3
0
0
-
a
i
r
n

i

Eisemannetal./StylizedVectorArtfrom3DModelswithRegionSupportFigure2:Usingrasterizationtodeﬁneﬁlledregionscanyieldaliasingartifacts.asshowninGoofy’slowerlipren-deringwithSwift3D(left)andtheﬂamingo’sbeak/headin-tersectionrenderedbyLiveArt.thatdirectlyrendersa3Dmeshedsurfacemodelintostylizedﬁlled-regionvectorartconsistingoflayered2Dpolygons.Themostdifﬁcultpartofthisprocessistheidentiﬁcation,processingandstylizationoftheregionsdeﬁnedbyusingthemeshedobject’scontoursasaboundaryrepresentation.Thisrenderingapproachrequiresseveralnewcontributions.•Meshcontoursdeﬁnedbyfacenormalsareaccuratebutjagged,whereasthosedeﬁnedbyinterpolatedvertexnor-malsaresmootherbutdonotaccuratelydelineateregions.Sec.3deﬁnessmoothcontoursthatproperlysurroundregionswiththenovelcombinationofajagged(butvi-suallysmooth)visualcontour,smoothshadingcontours,castjagged(butvisuallysmooth)shadowvolumesandanewadjustedsmoothshadowcontourthatproperlysur-roundstheaccuratebutjaggedshadowcontour.•Weanalyzeanddecomposethevector-artrenderingpro-cessintogeometricandtopologicalcomponents.Sec.4showshowthisnoveldecompositionenablestheuseofstandardGPUtechniquestoaccelerateonlythediscretetopologicalqueriesofcontourvisibilityandregionclassi-ﬁcation,whereasregionshapesaredeﬁnedgeometricallyatmachineprecision,toensuretheﬁdelityofthevector-artrenderingprocess.•Weextendanexistingprogrammablecontourstylizationmethod[GTDS04]withnewfeaturesthatcapitalizeontheregiondeﬁnitions,includingstylesthatoffsetthere-gionfromthecontour,smallregionelision(e.g.highlightspecks),region-sensitivecontoursmoothingandﬁllpro-cessingthattakesadvantageofrecentfeaturesavailableintheScalableVectorGraphicsformat[SVG03],asde-scribedinSec.5.Sec.6demonstratesaprototypeﬁlled-regionvector-artrenderingsystembasedonthesecontributionsthatrunsinsecondson10K-facemanifoldmodelsoverseveralstyles.2.PreviousWorkOurrendererconvertsmeshesintoﬁlled-regionillustrations.ManyNPRapproachesfocusonlyonextractionandstyl-izationofcontoursandavoidtheneedtoconnectthemtoproduceandstylizeregions[MKG∗97,Elb98,KDMF03,DFRS03,SH05,BKR∗05,OZ06,JD07].WinkenbachandSalesinconstructedstroke-texturedvector-artregionsfrommeshedmodelsforpen-and-inkil-lustrationofarchitecturalmodels[WS94]andparametricsurfaces[WS96].ThesesystemsusedaBSPtree,exactra-tionalarithmeticandshadowvolumestoconstructapre-ciseplanarmapofclipped,self-shadowedvisibleregions.Theirregionsconsistedofsimplepolygons(triangles)whosetexturecoordinatesallowedthemtobeﬁlledwithstroke-basedhatchingandtexture.Ourrenderingsystemsimilarlyconstructsaself-shadowedplanarmap,butwegeneratecomplexpolygonstosupportthekindofshape-dependentstylizationfoundinmanyclip-artstylesandtoreducethecomplexityoftherepresentation.Furthermore,architecturalmeshedmodels[WS94]containsimplecontoursandpara-metricsurfacetesselations[WS96]canbesubdividedtoyieldprecisecontourswhereasgeneralmeshesrequirethecarefulanalysisofSec.3toproperlydeﬁneregions.Stroilaetal.[SEH08]usedparticlesystemsconstrainedtoimplicitsurfacestocreatelayeredﬁlled-regionvector-artillustrations.Thispaperexpandsthatworktoincludemeshedobjectsasinput,whichrequirespecialattentiontoyieldsmoothappearingcontoursthatboundregions.Wealsoexploreawidervarietyofclip-artstylesinSec.5.Ourregion-basedstylizationapproachisbuiltontheprogrammablecontourstylizationapproachofGrablietal.[GTDS04],whichdescribesanNPR-adaptedshadinglan-guageforstylizingoutlinerenderingsofmeshedobjects.Ourprogrammablestylizationreliesonhooksintheinter-mediaterepresentationtoaccesseachelement’s2Dimage-planecontextand3Dmeshneighbors,andsimilarinforma-tionwasprovidedbytheBSPtreesusedbyWinkenbachandSalesin[WS94,WS96].Numerousstylizationapproachesexistforimages[ST90],includingwatercoloring[CAS∗97,LD04,BNTS07]andtheconversionintophotorealisticcolor-gradientvectorart[PB06,SLWS07].Kangetal.[KHCC05]outlinedregionsinaninputimagewithmultiresB-splinesthatservedastan-gentvectorﬁeldsforregionstylization.Imagesegmentationoftenrequiresuserinput,soDeCarloetal.[DS02]usedeyetrackingtocontrolthelevelofdetailofimageregionab-straction,andKolliopoulosetal.[KWH06]presentedanau-tomaticsegmentationandgeneralizationofimagesegmentstylization.Ourmesh-basedregionstylizationexpandsontheimage-basedregionstylizationofWenetal.[WQL∗06].Theyfocusedonasinglestylizationthatreducedforegroundregionsbiasedbyilluminationsotherevealedwhitespaceservedasahighlight,andshiftedcolorstobetterindicateforeground/backgroundseparation.3.Region-RobustContourExtractionOurconversionofa3Dmeshedsurfaceintoa2Dlayeredpolygondepictionbeginsbyextractingthecontourswhoseimageprojectiondeﬁnethe2Dpolygonallayers.Inourc(cid:13)2008TheAuthor(s)Journalcompilationc(cid:13)2008TheEurographicsAssociationandBlackwellPublishingLtd.8
0
0
2

 
c
e
D
8

 

 
-
 

i

 

1
n
o
s
r
e
v
 
,

5
9
2
5
4
3
0
0
-
a
i
r
n

i

Eisemannetal./StylizedVectorArtfrom3DModelswithRegionSupport(a)(b)(c)(d)(e)(f)Figure3:Weprocessa3Dmeshedsurface(a)intoa2Dvectorclip-artdepiction(f).Weﬁrstextractcontours(b)anddeterminetheirvisibility(c).Wethenconstructaplanarmapandclassifytheregionsenclosedbycontours(d)toyieldabasevectordepiction(e)forstylization(f).prototypeimplementation,thesecontoursincludethevisualcontour(N·V=0),Lambertianisophotes(N·L=k),theshadowboundary(N·L=0),reﬂectionlines(e.g.N·H=k),suggestivecontours[DFRS03]andapparentridges[JD07].Ourgoalistoextractcontourswithenoughprecisiontouseasboundariesfortheﬁlledregionsoflayeredvectorart.Otherwiseportionsoftheregion(andotherfeaturecurvesintheseareas)canescapethecontourthatdeﬁnesitsbound-aryandwillconfuseregionclassiﬁcationandstylization,asdemonstratedinFigs.4and5.Thecontoursextractedfromsmoothsurfacesarepreciseenoughtouseasaboundaryrep-resentationforﬁlledregions[WS96,SEH08],butthecon-toursoftypicalmeshesarenotascleanlydeﬁned[IFH∗03].Thevisualcontourthatliesalongtheedgesbetweenthefrontandbackfacingelementsofameshcanbenotoriouslyjagged,includingshortswitchbackloops.WinkenbachandSalesin[WS96]extractedaprecisevisiblecontourfromatesselatedsmoothparametricsurfacebyreﬁningthetessel-lationnearthecontour.HertzmannandZorin[HZ00]ex-tractedaless-jaggedvisiblecontourfromameshedsur-faceusinginterpolatedper-vertexnormals.Theseinterpo-latedcontoursaremuchsmoother,butdonotdeﬁnegeo-metricallyaccurateregions.Sec.3.1analyzesthisissueforthevisualcontour,concludingthattheface-normalcontourshouldbeusedasthesilhouettetoobtainwell-deﬁnedre-gions.Sec.3.2examinestheshadowcontouranddevisesanadjustmentthatyieldsasmoothshadowcontourguaranteedtocontaintheactual(jagged)meshshadow.3.1.SmoothVisualContoursConsideredHarmfulInterpolatedvertexnormalscangenerateasmoothvisualcontour,butthesmoothedsilhouette(theportionofthepro-jectedvisualcontourgeneratorthatseparatesthesurfacefromthebackground)nolongercontainstheprojectedinte-riorofthemesh.Theinterpolated-vertex-normalvisualcon-tourrarelypassesthroughvertices,buttheverticesformtheouterboundsofthesilhouetteofameshedsurface.Whenplottedonavisible-surfacemeshrendering,thevertex-interpolatedvisualcontourslalomsaroundtheseextremalsilhouettevertices,alternatingbetweenvisibleandoccludedasitweavesitswayaroundtheperimeter.TheupperinsetofFig.4illustratesanexamplewherethesmoothedvisualcontour(inblue)failstocontainthesurfaceprojection.Ifportionsofthesurfacecanprojectoutsideofthesil-Figure4:Twoviewsofthesametorus.Thevisualcontouroftheleftview(red)iscomputedwithfacenormalsandap-pearsjaggedintherightview.Thevisualcontouroftherightview(blue)iscomputedusinginterpolatedvertexnormalsandappearssmoothintheleftview.Notethateachvisualcontourappearssmoothinitsparticularview.Theinsets(center)demonstratethatthebluevertex-interpolatedvisualcontourdoesnotproperlysurroundthegeometry,andcon-tours(e.g.theredvisualcontour)canescapeit.houette,thenotherfeaturecurvesdeﬁnedonthesurfacecanprojectoutsideofthesilhouettetoo.ThelowerinsetofFig.4demonstratesanexamplewheretheredface-normalvisualcontour(ashadowcontour)escapesthesilhouettedeﬁnedbythebluesmoothedvertex-interpolatedvisualcontourgenera-tor(thesituationcansimilarlyoccurwithasmoothedfeaturecontour).Theintersectionandtrimmingoffeaturecurvesthates-capethesilhouettewouldcauseproblemsinregionclas-siﬁcation.Furthermore,thevisibilityneartheseareaspillsbecomesill-deﬁnedasthefeaturecontour’smeshvisibil-itywouldchangeatadifferentlocationthanpredictedbyasmoothedvertex-interpolatedvisualcontourgenerator.Fig.5showsseveralotherpotentialproblems.Elementsonback-facescanextendoverthesilhouette(eyefeaturelinein(a)).Thesilhouettecanshowverycomplexbehaviorthatcannotoccur,assuch,onreal,smoothmanifolds(cuspin(b)).Thismakesvisibilitycomputationparticularlychal-lenging.Inset(c)showshowdeformedthecontourbecomeswhentriangleshavestronglydifferingvertexnormals.Thecurveisdraggedoffitsoriginalpositionandevenbehindtheshadowregions.Inset(d)illustratessimilarproblemsforcolorcontours(black,stippledmeaninginvisible)thatdonotmatchupwithanysilhouettes(redouter,yellowinner).Forexample,inthecenteroftheﬁgure,thevertexsilhouetteonlycreatesasmalldetachedregiononthebackofthehorn.Wethusrelyonthevisualcontourgeneratordeﬁnedbyc(cid:13)2008TheAuthor(s)Journalcompilationc(cid:13)2008TheEurographicsAssociationandBlackwellPublishingLtd.8
0
0
2

 
c
e
D
8

 

 
-
 

i

 

1
n
o
s
r
e
v
 
,

5
9
2
5
4
3
0
0
-
a
i
r
n

i

Eisemannetal./StylizedVectorArtfrom3DModelswithRegionSupportVisibilityVertex normalOur solution(a)(b)(c) (d)Figure5:REGIONARTIFACTScanresultfromusinginter-polatedvertexnormalsforthevisualcontour.Determinationofvisibilityischallenging(seeinset,basedonray-tracing).Otherproblemsinclude:(a)Afeatureelement(theeye)onthebackfaceextendsoverthesilhouette.(b)Acuspescapestheviewtangentplane.(c)Badlyshapedtrianglesleadtovisibilityproblems.(d)Incompatibilitybetweenthevisualcontourandcolorcontours.thesubsetofmeshedgesthatliebetweenfront-facingandback-facingmeshpolygons.Itsjaggedartifactsandswitch-backsoccurinaview-tangentialdirectionwhichhidesthemfromtheviewer,butcancauseproblemsinstylization,ﬁxedbytheprogrammablechainingdescribedinSec.5.3.2.AProperSmoothedShadowContourTwokindsofcontoursareusedtodepictshadows.Theshadowboundaryisavisualcontourgeneratorfromtheviewofalightsource,whereasthecastshadowcontourisaprojectionoftheshadowboundaryalongthelightdirectionontofurtherportionsofthesurface.Weextractcastshadowcontoursbyconstructingashadowvolumeandintersectingitwiththemeshedsurface.Weﬁrstcreateatemporarycopyofthemeshwhosefacesarethensubdividedbytheshadowvolume.Weoutputthecastshadowcontourasasequenceofverticesusingfaceindicesandbarycentriccoordinatestoindicatetheirpositionontheoriginalmesh.Weextractasmoothshadowboundaryusingvertexinter-polatednormals.Thissmoothedshadowboundarycandis-agreewiththeshadowcastbytheactualgeometry,asil-lustratedinFig.6(left),whichcanresultinshadingdis-continuitiesalongtheshadowboundary.Toovercomethisissue,weadjustthevertexnormalsindirectlybymanipu-latingtheweightingoffacenormals.(Similaradjustmentstotheshadingcalculationhavebeenproposedformoredirectartisticcontrolofrasterizedcartoonhighlightsandshadows[iAWB06,TiABI07]).Forthesakeofcomputingasmoothshadowboundary,wesetthevertexnormaltotheFigure6:Left:Theshadowcontourwhereinterpolatedver-texnormalsareperpendiculartoalightdirection(darkregions)candisagreewiththeactualshadowcastbythegeometry(redcontours).Right:Wecreateanewsmoothshadowcontourregionsusingadjustednormalinterpolation(dark)toensurethatitstrictlycontainstheactualcastgeo-metricshadows(redcontours).valueofitsadjacentfacenormalthatformsthegreatestanglewiththelightvector(minimizesN·L).Thisensuresthattheshadowboundarypassesthroughthebright-sidefacesalongtheedge-boundarybetweenfacespointingtowardthelightandthosepointingaway.4.FastTopologicalRegionProcessingOnceallofthecontourshavebeenextracted,wecomputetheirmutualintersectiontodividetheminto(polyline)con-toursegments.Thesecontoursegmentscollectivelyformwell-deﬁnedregionboundariesintheprojection,withoutdanglingsegments.Wecomputebothobjectspaceintersec-tions(betweenshadingandshadowcontours),aswellasimage-spacevisibilityintersections(betweenthosecontoursandthevisualcontour).Wethenﬁndthevisiblesubsetofthesecontoursegments,andusethemasaboundaryrepresentationtoconstructapla-narmapofvisibleregionswhichmustthenbeclassiﬁedac-cordingtothekindofshadingtheyrepresent.Bothvisibilityandclassiﬁcationaretopologicaloperationsbasedonanor-deringorlabeling,whichisdiscreteandwell-deﬁnedforpo-sitionswellinsidetheinteriorofelements.ThisrealizationpermitstheuseofGPUtechniquestoacceleratethetopo-logicalqueriesofcontourvisibilityandregionclassiﬁca-tionforourvectorart.Forthesequeries,weuseanefﬁcientﬁxed-precisionrasterizationasaconservativetest,andre-verttoslow,robustray-castingforambiguouscases.Thisap-proachdiffersfromprevious,image-basedapproaches(e.g.index[NM00],z-ornormal-buffers[Her99])thatprocessbothgeometryandtopologyatimageresolution.4.1.ContourVisibilityviaOcclusionQuerySincewemutuallyintersectallcontours,visibilitydoesnotchangealonganycontoursegment.Thevisiblesubsetofthesedeﬁneregionboundaries.Raycastingcandeterminecontourvisibility[SEH08],butwouldbetooslowforlargemeshes.Avotingestimateisfaster[GTDS04],butitsinac-curacy,especiallynearcusps,wouldinterferewithdepend-ablyformingclosedregionboundaries.c(cid:13)2008TheAuthor(s)Journalcompilationc(cid:13)2008TheEurographicsAssociationandBlackwellPublishingLtd.8
0
0
2

 
c
e
D
8

 

 
-
 

i

 

1
n
o
s
r
e
v
 
,

5
9
2
5
4
3
0
0
-
a
i
r
n

i

Eisemannetal./StylizedVectorArtfrom3DModelswithRegionSupportWeinsteaduserasterizationtoanswerthistopologicalquerymorerapidlywhilemaintainingaccuracy.Weﬁrstcullanycontoursegmentslyingonback-facingpolygons.Wealsocullanyvisualcontoursegmentslyingoncreaseedgesifthemeshisaclosed,orientable,andwatertightmanifold.Wethenrasterizethepolylinesoftheremainingcontourseg-mentsalongwiththemeshfaces.OpenGL’socclusionquerydetermineswhichcontoursegmentspassedthedepthtest.WeuseOpenGL’spolygonoffsettoresolvepoly-line/polygondepthbufferinterference,butoccludedcontoursegmentsnearthevisualcontourcanstillpokethroughthemesh.Wethusonlyrasterizethecentersofcontourseg-ments,avoidingtheirerror-proneends.Whenacontourseg-mentistooshort,weresorttoprecisebutcostlyraycasting.Weensurewatertightregionswithasecondtestusingthepreviouslyfoundvisiblesegments.Becausetherasterizationquerycanfailwhereseveralvisiblesilhouettesprojecttothesamepixel,wemarkasmallpixelneighborhoodaroundthepreviouslydeterminedvisiblesilhouettesandanyvisualcontourintersectingthesepotentiallyambiguouspixels(de-tectedefﬁcientlyviastenciltests)ishandledwithraycast-ing.Onamodelwithtensofthousandsoffaces,contourvisibilitytakesacoupleofseconds(seeTable1)insteadofafullminuteneededforraycasting.4.2.RegionClassiﬁcationviaaFragmentShaderFigure7:Rasterizationaccel-eratesregionclassiﬁcation.Green=triangleID.Red/blue=barycentriccoordinates.Weusethevisiblecontoursegmentsasaboundarytodeﬁnere-gionsofhomogeneousshading.Theseregionsareorganizedbyawinged-edgestructurecalledaplanarmap,constructedinourprototypebytheCGALArrangementPackage[FHHN99].Thespeciﬁckind/combinationofshadingrepresentedbyeachregionmustnextbeestablishedbyaclassiﬁcationstep.Weacceleratethetopologicalqueryofregionclassiﬁca-tionbyrasterizingthesurfacemeshusingafragmentshaderthatencodesthefaceindexandbarycentriccoordinatesofthefragment’ssurfacepoint,asshowninFig.7.Weclassifyeachplanarmapregionbypickingoneofitsinteriorpoints,usingtherasterizationtoﬁnditscorrespondingobject-spacecoordinates,andcomputingthatmeshpoint’sillumination.Wesimilarlyclassifyregionsasshadowed/unshadowedwithasecondrenderingusingshadowvolumes.Toavoidmisclassiﬁcationerrorsduetonumericalimpre-cision,weremovepixelsthattouchtheregion’sboundaryfromthequeryset,similartoSec.4.1.Ifaregionistoosmall,itmaynotcorrespondtoanypixelsintheregionras-terization,inwhichcasewemustcastaraythroughittowardthemeshtodetermineitsshadingclassiﬁcation.Ourprototypeimplementationﬁndsforeachregionase-quenceofinteriorpointsbytesselatingtheregion,asshowninFig.3(d),andreturningthetrianglecentroidsinorderofdecreasingarea.5.StylizationThecontourextractionandregionprocessingresultsinapla-narmapthatcanbeconsideredabare-bonesillustrationofthe3Dmeshedmodel,e.g.Fig.3(e).Thestylizationofaren-deringdeﬁnesitslookandachievesavarietyofvisualcom-municationobjectives,e.g.toelicitanemotionalresponse,torelateotherwisedisparateobjects,ortogeneralizeaspe-ciﬁcinstancethroughiconography[GG01,SS02].Toprovidesuchﬂexibilityinoursystem,westrivetoseparatestylefromcontentviathedeﬁnitionanduseofstyletemplatesthatencapsulateanartist’sdesignforusebynovices.Weexpandprogrammablecontourstyliza-tion[GTDS04]toprogrammablevector-basedregionstyl-ization.Fig.11demonstratesthisapproachbyapplyingsev-eralstyletemplatesto3Dmodelsofvaryingcomplexity.Unlikelinestylization(e.g.[MKG∗97,Elb98,IHS02,HOCS02,KDMF03,DFRS03,GTDS04,SH05,BKR∗05,OZ06,JD07,GVH07])andraster-basedregionstylization(e.g.[ST90,Mei96,CAS∗97,LMHB00,KMM∗02,LD04,BNTS07]),thereexistrelativelylittlepreviousworkonstyl-izationofvectorregions[GG01,SS02].Vectorgraphicﬁllshavetraditionallybeenlimitedtosolidﬁllsorsimplegradi-ents,andthestylizationofvectorgraphicshasfocusedoneithercontour-stylizationoftheiroutlines[IHS02,HOCS02,GTDS04,GVH07]orparticle-sampledstippling,hatching,andhalf-toningoftheirinteriors[WS96,HZ00,PHWF01,Sec02,FMS02,WB03,PFS03].Whereaspreviousregionshadingapproacheswerelim-itedtoraster-basedNPR(e.g.toonshaders),orverysimplevectorgradientﬁlls,recentvectorstandardssuchasSVGorFlashofferamuchricherpaletteofshadingeffects.TheSVGspeciﬁcation[SVG03]containsahostoffunctional-itytoenablestylizationofstrokes,ﬁlls,andgradients.Fil-ters,rangingfromGaussianblurstonoisefunctions,canbeappliedtomodifytheappearanceofvectorelements.Com-plexlayering,masking&clipping,andcompositingmodesareanalogoustoraster-basedmulti-passtechniques,stencil-ing,andblending(respectively).Inaddition,SVGisfullyscriptable,allowingsomeappearancechangestobepack-agedwithintheﬁnaloutput.Thiswarrantstheinvestigationofnewregionshadingapproachestovectorart.Renderingtovectorartusingcomplexgradientmeshes[PB06,SLWS07]furtherexempliﬁesthispossibility.5.1.Region-SensitiveContourStylizationOncecontoursandregionsarecomputedandorganizedintotheplanarmaprepresentation,theycanbequeriedinbothc(cid:13)2008TheAuthor(s)Journalcompilationc(cid:13)2008TheEurographicsAssociationandBlackwellPublishingLtd.8
0
0
2

 
c
e
D
8

 

 
-
 

i

 

1
n
o
s
r
e
v
 
,

5
9
2
5
4
3
0
0
-
a
i
r
n

i

Eisemannetal./StylizedVectorArtfrom3DModelswithRegionSupportSilhouette StylizationSketchy Strokes FillSmooth Fill ApproximationFinal CompositeStroke SampleStyle SampleOuter ContourBlurred Contour MaskStrokes "Texture"Strokes "Texture"IsocontoursBlurred IsocontoursFake ShadowFigure8:ANATOMYOFASTYLE-wecreateacomplexvectorstylebycombiningandlayeringvariousfeaturecurves:(SilhouetteStylization)Wemapauser-deﬁnedscribblestrokeontothechainedsilhouetteafterremovingsomeshortsegments.(SketchyStrokeFill)Theoutercontouroftheobjectisblurredandusedtomaskarandomscribble“texture”,toachievetheeffectofloosestrokeswithfadingends.(SmoothFillApproximation)Weonlyextracttwolightiso-contours,butincreasetheapparentcomplexitybyblurringtheresultwithanSVGﬁlter.(FinalComposite)Allstyleelementsarelayeredandafakeshadowisadded,consistingofaﬁxedscribble,scaledtothewidthofthecontour.the2Dprojectedimagespaceandthe3Dobjectspace,viaback-referencesintotheoriginalmeshedmodel.Thisallowsstylestorefertogeometricdatafromtheoriginalmeshandcanwarpshapesdirectlyin3Dtotakeperspectiveintoac-count.Chainingistheproceduralprocessingofcontourseg-mentsinpreparationforstylization[GTDS04].Chainingisespeciallyvitalforprocessingthevisualcontour,asitspla-narmapprojectionfrequentlyconsistsofsegmentsthataredisjointintheoriginal3Dmesh.Additionally,varyingseg-mentsizes,cusps,andloopscanconfoundconversionofthevisualcontourintostylizableoutlines[Her99,NM00,IFH∗03].Weaugmentapreviousprogrammablechainingsystem[GTDS04]toincludequeriesandoperationsonre-gions,e.g.toallowforregionsizetocontrolregioncontourthickness,ortoremovesmallhighlightregions.Oncecontoursareproperlychained,wecansimplifyandsmooththemwithanangle-thresholdedBéziercurve-ﬁttingalgorithmbasedonaNewton-Rhapsonerrorminimization.Weleaveittothestyleprogrammertosharecontourﬁt-tedcurvesbetweenadjacentregionstoavoidaccidentalmis-alignment,butwedonotforcecontoursharing,assomeclip-artstylesintentionallymisalignregions,suchasFig.11(3rdrow).OurstylesfurtherembellishtheseﬁttedBézierseg-mentsbyadaptingaskeletalstrokestechnique[HLW93]toiterativelymapstrokesontostrokes[HOCS02],asillustratedinFig.9anddemonstratedinFigs.8and11.(1)(2)(3)(4)ResultStrokeInputFigure9:Iterativemappingofuser-strokestoachievegeo-metricstylization.5.2.RegionStylizationDevelopmentStylizationwithinoursystemreliesontwodistinctsteps.First,astyletemplatehastobeprogrammedmanuallybyanadvanceduser(describedbelow).Second,anovicecanap-plyastyletemplateeitherfullyautomatically,orwhilead-justingsomehigh-level,style-speciﬁcparametersexposedbythestyledeveloper,suchasmaximumlinethicknessinFig.11(2ndrow)orambientcolor(4throw).Fig.11wascre-atedinabatchprocesswithconstantparametersaftersettingposeandlightingforeachcolumn.Todevelopastyle,oursystemoffersastylizationframe-workthatisembeddedinseveralC++classeswithmanyde-fault(e.g.chaining)andconveniencemethods(e.g.collatorsanditerators),allowingforquickprototyping,yetprovidingenoughlow-levelcontroltoimplementarbitrarilycomplexstyles.Thestylespresentedinthispapertakeasinputapla-narmaparrangementalongwithmaterialdeﬁnitionsfromthe3Dobjectﬁle,andstylizationparametersincluding:ﬁt-tingerrors,penstrokes,andproceduralchainingandregionstylizationfunctions.Typically,astyleloopsoverallfacesofagivenface-type(contour,albedo,specular,...)storedinthearrangement,andcollatestheirhalf-edgesintocomplexcurves(contours+holes).Moreadvancedstylescancreatecustomregionsbydeﬁningchainingruleswithinourchain-ingsystem,whichissimilartoGrablietal.[GTDS04].Inmostcases,differentstylisticeffectsareappliedtoeachfacetype.Forexample,Fig.11(3rdrow)convertsallregionsintostrokesbyloopingasinglestrokeatauser-deﬁnedangle,givensomeconstraintsonrandomness,loopiness,andcov-erage.Thebaseregionsuseadifferentanglethantheshad-ingregions(seepear).Note,thatthebaseregionscorrectlyﬁlltheentireshapewithoutleavingholesunderneaththeshadingregions,allowingfordiverselayeringandcomposit-ingeffects.InFig.11(4throw)baseregionsareignored,andsmallshadingregionsareeliminated.TheremainingregionsareconvertedfrompolygonalformtoBézierseg-mentswithalarge,region-sizedependentﬁttingerror.Thisproducesveryvagueshadingregions,whilekeepingsmallerregionswell-behaved.Silhouettecontoursarechainedandﬁttedwithpenorbrushstrokes,asinpreviousworks.Thegeometricprimitives,alongwithattributessuchascolor,thickness,blur,etc.arethenemittedbyanSVGoutputclass.c(cid:13)2008TheAuthor(s)Journalcompilationc(cid:13)2008TheEurographicsAssociationandBlackwellPublishingLtd.8
0
0
2

 
c
e
D
8

 

 
-
 

i

 

1
n
o
s
r
e
v
 
,

5
9
2
5
4
3
0
0
-
a
i
r
n

i

Eisemannetal./StylizedVectorArtfrom3DModelswithRegionSupportFigure10:(Left)The“feline”isrenderedwithregionsde-ﬁnedbythevisualcontour,ashadowboundaryandoneLambertianisophotecontour.(Center)Thepeppermodeliscomplexbutthecontoursaresimple.Itusestwospecularanddiffusecontoursforthepepperitselfandoneforthestem,respectively.(Right)Theduckdemonstratesadvancedregionshadingbyusingblurredﬁllsforitsinteriorregionsandshadow.Fig.8demonstratesamorecomplex,region-basedstyletem-plate,includingSVGmaskingandblurringoperations.6.ResultsandConclusionOursystemenablesatypicalconsumer,unskilledinillus-tration,totakeameshedmodel(createdordownloaded)andapplyastyletemplatetoconvertthemodelintostylizedvec-torform,readyforinsertioninadocumentorpresentation,inamatterofseconds.AsexhibitedinFig.1,thissystemal-lowstheusertore-poseandre-illuminateanobjecttherebyimprovingitsdepictionasavectorillustration.Fig.10showsseveralexamplesofﬁlled-regionvectorartrenderedwithoursystem,whileFig.11demonstratestheseparationofstylefromcontent,byapplyingfourdifferentstylestothreedif-ferentmeshedmodels.Suggestivecontoursarealsosupportedinoursystemasevidentintheaccompanyingvideo.Theyaremosteffec-tiveonlyonhighlytesselatedobjects,andwhenshadingisunavailable(e.g.line-artonly).ThisissomewhatreﬂectedintheworkofLeeet.al.[LMLH07]thatderivescontoursbasedonshading.Theabilitytomanipulatelightdirectionduringthecon-structionofclip-artenablesgreatercontrolofitsappearance,asevidentinFigs.1and12.Thoughclip-artlibrariesusuallycontaindepictionsofsimpleobjects,ourvectorartrenderercanbeappliedtomorecomplexmeshedmodelssuchasthepepperinFig.10ortheXYZ-dragoninFig.13.Ourprototypeisdesignedasaproof-of-concept,todemonstratethatcontourextractioncanbemaderobustenoughforﬁlled-regiondeﬁnitionandprocessing.Table1indicatestheperformanceofthisprototype,showingthatvectorrenderingofmeshestakesamatterofseconds.Thisprototypeimplementationcontainsmanyopportunitiesforefﬁciencyimprovements:theall-pairscontourintersectionisprobablytooconservative,andatriangulationisnotstrictlynecessarytoﬁndaregion’sinteriorpoint.Figure11:OBJECT/STYLEMATRIX–Threemodelsofvaryingcomplexityrenderedinfourdifferentstyles.Figure12:Lightingandstylizationcreateadarkmood.Currently,stylesarenotyetexpressedinascriptinglan-guage,butcompiledwithC++toallowaveryefﬁcientstyleapplication.Inconsequence,wecantreatevencom-plexmapsrapidly.Allstylesareappliedwithintheorderofasecond.Nevertheless,inthefutureweplantorelyoncom-pilingscriptstosharethebeneﬁtsofbothworlds.Coupledwithanintuitiveinteractivemodelingsystem,weenvisionthatthisrenderingenginewouldenableconsumersc(cid:13)2008TheAuthor(s)Journalcompilationc(cid:13)2008TheEurographicsAssociationandBlackwellPublishingLtd.8
0
0
2

 
c
e
D
8

 

 
-
 

i

 

1
n
o
s
r
e
v
 
,

5
9
2
5
4
3
0
0
-
a
i
r
n

i

Eisemannetal./StylizedVectorArtfrom3DModelswithRegionSupportCounts/Times(ms)PigHandPepperFelineFaces9,2008,00031,2808,356Segments2,0682,2442,8693,858Crossings4399456772,672Segments+Crossings2,5073,1893,5466,530Visible1,0151,0911,1591,901Regions469351260ContourExtraction14123913ContourIntersection81102154310VisibilityCulling91436226162PlanarMapConstruction219300252590Triangulation5859515891,935RegionClassiﬁcation9111,0491,2243,157TotalTime1,9012,8502,4846,167Table1:Structure(top)andtimeresults(bottom)oversev-eralmodels.Timesreportedinmilliseconds.toquicklyconstructcustomillustrationsfromscratchthatmatchtheappearanceoftheprofessionalartworkfoundincommercialclip-artcollections,whileatthesametimeen-ablingreuseoftheirdigitalassets.Figure13:AdetaileddragonmodelAcknowledgments.ElmarEisemannwassupportedbytheExploradocprogramoftheregionRhône-Alpes.ManythanksforthemodelsgotoStanford,CaltechandINRIA,IMATI(providedbytheAIM@SHAPErepository).References[BKR∗05]BURNSM.,KLAWEJ.,RUSINKIEWICZS.,FINKELSTEINA.,DECARLOD.:Linedrawingsfromvolumedata.InProc.SIGGRAPH,ACMTOG(2005),pp.512–518.[BNTS07]BOUSSEAUA.,NEYRETF.,THOLLOTJ.,SALESIND.:Videowatercolorizationusingbidirectionaltextureadvection.Proc.SIGGRAPH,ACMTOG26,3,Article104(2007).[BTM06]BARLAP.,THOLLOTJ.,MARKOSIANL.:X-toon:Anextendedtoonshader.InProc.NPAR(2006),pp.127–132.[CAS∗97]CURTISC.J.,ANDERSONS.E.,SEIMSJ.E.,FLEISCHERK.W.,SALESIND.H.:Computer-generatedwatercolor.Proc.SIGGRAPH,ComputerGraphics31(1997),421–430.[DFRS03]DECARLOD.,FINKELSTEINA.,RUSINKIEWICZS.,SANTELLAA.:Suggestivecontoursforconveyingshape.Proc.SIGGRAPH,ACMTOG22,3(2003),848–855.[DS02]DECARLOD.,SANTELLAA.:Stylizationandab-stractionofphotographs.InProc.SIGGRAPH,ACMTOG(2002),pp.769–776.[Elb98]ELBERG.:Lineartillustrationsofparametricandimplicitforms.IEEETVCG4,1(1998),71–81.[FHHN99]FLATOE.,HALPERIND.,HANNIELI.,NECHUSHTANO.:ThedesignandimplementationofplanarmapsinCGAL.Proc.WorkshoponAlgorithmEng.1668/1999(1999),154.[FMS02]FREUDENBERGB.,MASUCHM.,STROTHOTTET.:Real-timehalftoning:aprimitivefornon-photorealisticshading.InProc.EGRW(2002),pp.227–232.[GG01]GOOCHB.,GOOCHA.A.:Non-PhotorealisticRendering.A.K.Peters,2001.[GTDS04]GRABLIS.,TURQUINE.,DURANDF.,SIL-LIONF.:ProgrammablestyleforNPRlinedrawing.InProc.EGSR(2004),pp.33–44.[GVH07]GOODWINT.,VOLLICKI.,HERTZMANNA.:Isophotedistance:ashadingapproachtoartisticstrokethickness.InProc.NPAR(2007),pp.53–62.[Her99]HERTZMANNA.:Introductionto3DNon-PhotorealisticRendering:SilhouettesandOutlines.SIG-GRAPHCourseNotes(1999).[HLW93]HSUS.C.,LEEI.H.H.,WISEMANN.E.:Skeletalstrokes.InProc.UIST(1993),pp.197–206.[HMK02]HEKMATZADAD.,MESETHJ.,KLEINR.:Non-photorealisticrenderingofcomplex3Dmodelsonmobiledevices.InProc.Conf.Intl.Assoc.Math.Geol.(Sep.2002),vol.2,pp.93–98.[HOCS02]HERTZMANNA.,OLIVERN.,CURLESSB.,SEITZS.M.:Curveanalogies.InProc.EGRW(2002),pp.233–246.[HZ00]HERTZMANNA.,ZORIND.:Illustratingsmoothsurfaces.InProc.SIGGRAPH(2000),pp.517–526.[iAWB06]ICHIANJYOK.,WEMLERS.,BAXTERW.:Tweakablelightandshadeforcartoonanimation.InProc.NPAR(2006),pp.133–139.[ICS05]ISENBERGT.,CARPENDALEM.S.T.,SOUSAM.C.:Breakingthepixelbarrier.InProc.ComputationalAesthetics(2005),pp.41–48.[IFH∗03]ISENBERGT.,FREUDENBERGB.,HALPERc(cid:13)2008TheAuthor(s)Journalcompilationc(cid:13)2008TheEurographicsAssociationandBlackwellPublishingLtd.8
0
0
2

 
c
e
D
8

 

 
-
 

i

 

1
n
o
s
r
e
v
 
,

5
9
2
5
4
3
0
0
-
a
i
r
n

i

Eisemannetal./StylizedVectorArtfrom3DModelswithRegionSupportN.,SCHLECHTWEGS.,STROTHOTTET.:ADeveloper’sGuidetoSilhouetteAlgorithmsforPolygonalModels.IEEECG&A23,4(2003),28–37.[IHS02]ISENBERGT.,HALPERN.,STROTHOTTET.:StylizingSilhouettesatInteractiveRates:FromSilhouetteEdgestoSilhouetteStrokes.Proc.Eurographics,CGF21,3(2002),249–258.[JD07]JUDDT.,DURANDF.:Apparentridgesforlinedrawings.Proc.SIGGRAPH,ACMTOG26,3,Article19(2007).[KDMF03]KALNINSR.D.,DAVIDSONP.L.,MARKOSIANL.,FINKELSTEINA.:Coherentstyl-izedsilhouettes.Proc.SIGGRAPH,ACMTOG22,3(2003),856–861.[KHCC05]KANGH.,HEW.,CHUIC.,CHAKRABORTYU.:Interactivesketchgeneration.InProc.PaciﬁcGraph-ics(2005),pp.821–830.[KMM∗02]KALNINSR.D.,MARKOSIANL.,MEIERB.J.,KOWALSKIM.A.,LEEJ.C.,DAVIDSONP.L.,WEBBM.,HUGHESJ.F.,FINKELSTEINA.:WYSI-WYGNPR:drawingstrokesdirectlyon3Dmodels.InProc.SIGGRAPH,ACMTOG(2002),pp.755–762.[KWH06]KOLLIOPOULOSA.,WANGJ.M.,HERTZ-MANNA.:Segmentation-based3Dartisticrendering.InProc.EGSR(2006),pp.361–370.[LD04]LUFTT.,DEUSSENO.:Watercolorillustrationsofplantsusingablurreddepthtest.InProc.NPAR(2004),pp.11–20.[LMHB00]LAKEA.,MARSHALLC.,HARRISM.,BLACKSTEINM.:Stylizedrenderingtechniquesforscal-ablereal-time3Danimation.InProc.NPAR(2000),pp.13–20.[LMLH07]LEEY.,MARKOSIANL.,LEES.,HUGHESJ.F.:Linedrawingsviaabstractedshading.Proc.SIG-GRAPH,ACMTOG26,3,Article18(2007).[Mei96]MEIERB.J.:Painterlyrenderingforanima-tion.InProc.SIGGRAPH,ComputerGraphics(1996),pp.477–484.[MF06]MCGUIREM.,FEINA.:Real-timerenderingofcartoonsmokeandclouds.InProc.NPAR(2006),pp.21–26.[MKG∗97]MARKOSIANL.,KOWALSKIM.A.,GOLD-STEIND.,TRYCHINS.J.,HUGHESJ.F.,BOURDEVL.D.:Real-timenonphotorealisticrendering.InProc.SIGGRAPH,ACMTOG(1997),pp.415–420.[NM00]NORTHRUPJ.D.,MARKOSIANL.:Artisticsil-houettes:ahybridapproach.InProc.NPAR(2000),pp.31–37.[OZ06]OLSONM.,ZHANGH.:SilhouetteExtractioninHoughSpace.Proc.Eurographics,CGF25,3(Sept.2006),273–282.[PB06]PRICEB.,BARRETTW.:Object-basedvector-izationforinteractiveimageediting.Vis.Comput.22,9(2006),661–670.[PFS03]PASTORO.M.,FREUDENBERGB.,STROTHOTTET.:Real-timeanimatedstippling.IEEECG&A23,4(2003),62–68.[PHWF01]PRAUNE.,HOPPEH.,WEBBM.,FINKEL-STEINA.:Real-timehatching.Proc.SIGGRAPH,ACMTOG(2001),581–586.[QTG∗06]QUILLETJ.-C.,THOMASG.,GRANIERX.,GUITTONP.,MARVIEJ.-E.:Usingexpressiverenderingforremotevisualizationoflargecitymodels.InProc.Web3D(2006),pp.27–35.[Sec02]SECORDA.:WeightedVoronoistippling.InProc.NPAR(2002),pp.37–43.[SEH08]STROILAM.,EISEMANNE.,HARTJ.C.:Clipartrenderingofsmoothisosurfaces.IEEETVCG14,1(2008),71–81.[SH05]SUW.Y.,HARTJ.C.:Aprogrammableparti-clesystemframeworkforshapemodeling.InProc.SMI(2005).[SLWS07]SUNJ.,LIANGL.,WENF.,SHUMH.-Y.:Im-agevectorizationusingoptimizedgradientmeshes.Proc.SIGGRAPH,ACMTOG26,3,Article11(2007).[SMC04]SELLEA.,MOHRA.,CHENNEYS.:Cartoonrenderingofsmokeanimations.InProc.NPAR(2004),pp.57–60.[SS02]STROTHOTTET.,SCHLECHTWEGS.:Non-PhotorealisticComputerGraphics:Modeling,Rendering,andAnimation.MorganKaufmann,2002.[ST90]SAITOT.,TAKAHASHIT.:Comprehensibleren-deringof3-Dshapes.Proc.SIGGRAPH,ComputerGraphics24,4(1990),197–206.[SVG03]SVGWORKINGGROUP:ScalableVectorGraphics(SVG)1.1Speciﬁcation.Website,2003.[TiABI07]TODOH.,ICHIANJYOK.,BAXTERW.,IGARASHIT.:Locallycontrollablestylizedshading.Proc.SIGGRAPH,ACMTOG26,3,Article17(2007).[WB03]WINNEMÖLLERH.,BANGAYS.:Renderingop-timisationsforstylisedsketching.InProc.AFRIGRAPH(2003),pp.117–122.[WQL∗06]WENF.,Q.LUAN,LIANGL.,XUY.-Q.,SHUMH.-Y.:Colorsketchgeneration.InProc.NPAR(2006),pp.47–54.[WS94]WINKENBACHG.,SALESIND.H.:Computer-generatedpen-and-inkillustration.Proc.SIGGRAPH,ComputerGraphics28(1994),91–100.[WS96]WINKENBACHG.,SALESIND.H.:Renderingparametricsurfacesinpenandink.Proc.SIGGRAPH,ComputerGraphics30(1996),469–476.c(cid:13)2008TheAuthor(s)Journalcompilationc(cid:13)2008TheEurographicsAssociationandBlackwellPublishingLtd.